<html>
  <head>
    <script src="../vendor/p5.min.js"></script>
    <script src="twig.js"></script>
  </head>
  <body>
    <main>
    </main>

    <script>
        function setup() {

            // Don't use var !!!!!!!
            twig = initializeTwig();
            twig.root.printTree();

            background = twig.root.widget;
            //console.log(background)

            createCanvas(background.width, background.height);

            // Track the depth of last iteration!
            var lastDepth = 0;

            const iterator = new TwigNodeIterator(twig.root);
            
            while (iterator.hasNext()) {
                const { value, done } = iterator.next();
                const { node, depth } = value;

                var depthChange = depth - lastDepth;

                // Process the node here

                var widget = value.node.widget;

                console.log(depth - lastDepth, widget.type)

                 switch (widget.type){
                    case "TEMPLATE":

                        
                        fill(random(255), random(255), random(255));

                        //console.log(widget.posX, widget.posY, widget.width, widget.height);

                        //rect(0,0,100,100)
                        rect(widget.posX, widget.posY, widget.width, widget.height);
                        break;
                }

                lastDepth = depth;
            }

            /*
            while (iterator.hasNext()) {
                const { value, done } = iterator.next();
                const { node, depth } = value;

                console.log(value)
                
                

                switch (widget.type){
                    case "TEMPLATE":

                        console.log(widget)
                        fill(random(255), random(255), random(255));

                        //console.log(widget.posX, widget.posY, widget.width, widget.height);

                        //rect(0,0,100,100)
                        rect(widget.posX, widget.posY, widget.width, widget.height);
                        break;
                }
                    

            }

            */
        }

        function draw() {

         

            //background(220);
        }
    </script>
  </body>
</html>;;